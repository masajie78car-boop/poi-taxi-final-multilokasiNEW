<!DOCTYPE html><html lang="id"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Panel Admin - Stasiun Jatinegara</title><style>body{margin:0;font-family:Poppins, sans-serif;background:#f5f7fb;color:#333}header{background:#007bff;color:#fff;padding:10px 12px;text-align:center;box-shadow:0 3px 8px rgba(0,0,0,0.08);margin-bottom:6px}header h1{margin:0;font-size:18px}main{max-width:960px;margin:0 auto;padding:8px}.section{background:#fff;padding:12px;border-radius:10px;box-shadow:0 3px 12px rgba(0,0,0,0.05);margin-bottom:10px}h2{margin:0 0 8px 0;color:#007bff;font-size:16px}table{width:100%;border-collapse:collapse;margin-top:6px}th,td{padding:6px;border:1px solid #eaeef5;text-align:center;font-size:13px}.empty{color:#888;font-style:italic}.logout{position:fixed;left:50%;transform:translateX(-50%);bottom:30px;background:#007bff;color:#fff;border:none;padding:12px 36px;border-radius:28px;box-shadow:0 6px 18px rgba(0,0,0,0.15);cursor:pointer}</style></head><body><header><h1>ðŸš† Panel Admin - Stasiun Jatinegara</h1></header><main><div class="section"><h2>ðŸš– Antrian Parkir Dalam (Aktif) - Max 6</h2><p><i>Maksimal 6 unit di dalam parkiran</i></p><table id="tableAktif"><thead><tr><th>No</th><th>No Polisi</th><th>No Lambung</th><th>Status</th><th>Aksi</th></tr></thead><tbody><tr><td colspan="5" class="empty">Memuat data...</td></tr></tbody></table></div><div class="section"><h2>ðŸ•’ Buffer (Menunggu di luar area)</h2><table id="tableBuffer"><thead><tr><th>No</th><th>No Polisi</th><th>No Lambung</th><th>Status</th><th>Aksi</th></tr></thead><tbody><tr><td colspan="5" class="empty">Belum ada buffer</td></tr></tbody></table></div></main><button class="logout" onclick="logout()">LOGOUT</button><script type="module">import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";import { getDatabase, ref, onValue, update, remove } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";const firebaseConfig = { apiKey: "AIzaSyArjIuAyCRw85LStoiJzgIdLyhs8HXPFhs", authDomain: "poi-taxi.firebaseapp.com", databaseURL: "https://poi-taxi-default-rtdb.asia-southeast1.firebasedatabase.app", projectId: "poi-taxi", storageBucket: "poi-taxi.firebasestorage.app", messagingSenderId: "774582687333", appId: "1:774582687333:web:ee95e1e3e705beaee4d88c" };const app = initializeApp(firebaseConfig);const db = getDatabase(app);const lokasi = "stasiun_jatinegara";const maxAktif = 6;const aktifTable = document.querySelector("#tableAktif tbody");const bufferTable = document.querySelector("#tableBuffer tbody");onValue(ref(db, `pangkalan/${lokasi}/antrian`), (snap) => { const data = snap.val() || {}; const arr = Object.values(data || {}); const aktif = arr.filter(d => d.status === "aktif").slice(0, maxAktif); const buffer = arr.filter(d => d.status !== "aktif"); aktifTable.innerHTML = aktif.length ? "" : "<tr><td colspan='5' class='empty'>Belum ada antrian aktif</td></tr>"; aktif.forEach((d,i)=>{ const tr = document.createElement('tr'); tr.innerHTML = `<td>${i+1}</td><td>${d.noPolisi}</td><td>${d.noLambung}</td><td>${d.status}</td><td><button class="selesai" data-id="${d.noPolisi}">Selesai</button></td>`; aktifTable.appendChild(tr); }); bufferTable.innerHTML = buffer.length ? "" : "<tr><td colspan='5' class='empty'>Belum ada buffer</td></tr>"; buffer.forEach((d,i)=>{ const tr = document.createElement('tr'); tr.innerHTML = `<td>${i+1}</td><td>${d.noPolisi}</td><td>${d.noLambung}</td><td>${d.status}</td><td><button class="setujui" data-id="${d.noPolisi}">Setujui</button></td>`; bufferTable.appendChild(tr); }); document.querySelectorAll('.selesai').forEach(b=>b.addEventListener('click', async e=>{ const id = e.target.dataset.id; await remove(ref(db, `pangkalan/${lokasi}/antrian/${id}`)); })); document.querySelectorAll('.setujui').forEach(b=>b.addEventListener('click', async e=>{ const id = e.target.dataset.id; await update(ref(db, `pangkalan/${lokasi}/antrian/${id}`), { status: "naik" }); }));}); window.logout = async function(){ window.location.href='login.html' };</script></body></html>
